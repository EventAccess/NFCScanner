{
	"$schema": "https://docs.renovatebot.com/renovate-schema.json",
	"extends": [
		"github>EventAccess/renovate-config"
	],
	"customManagers": [
		{
			"customType": "regex",
			"fileMatch": [
				"^\\.tools/tools\\.yaml$"
			],
			"matchStringsStrategy": "recursive",
			"matchStrings": [
				"(^|\\n)tools:\\n(([- ]{2,}\\w+:.*?|[ \\t]*)(#.*)?\\n)+",
				"\\ *-(\\ +(version:\\ ?[\"']?(?<currentValue>[^\\n\"']+)[\"']?|source:\\ ?[\"']?(?<datasource>[^\\n\"']+)[\"']?|source_id:\\ ?[\"']?(?<packageName>[^\\n\"']+)[\"']?|\\w+:\\ ?[^\\n]+)\\n+)+"
			]
		},
		{
			"customType": "regex",
			"description": "Arduino library dependencies from the Arduino library manager",
			"fileMatch": [
				"(^|/)arduino-meta\\.yaml$"
			],
			"matchStringsStrategy": "recursive",
			"matchStrings": [
				"(^|\\n)libraries:\\n(([- ]{2,}\\w+:.*?|[ \\t]*)(#.*)?\\n)+",
				"\\ *-(\\ +(name:\\ ?[\"']?(?<packageName>[^\\n\"']+)[\"']?|source:\\ ?[\"']?arduino[\"']?|version:\\ ?[\"']?(?<currentValue>[^\\n\"']+)[\"']?)[\\ \\n]*\\n+){3}"
			],
			"datasourceTemplate": "custom.arduino-lib"
		},
		{
			"customType": "regex",
			"description": "Arduino library dependencies from git (branch with commit)",
			"fileMatch": [
				"(^|/)arduino-meta\\.yaml$"
			],
			"matchStringsStrategy": "recursive",
			"matchStrings": [
				"(^|\\n)libraries:\\n(([- ]{2,}\\w+:.*?|[ \\t]*)(#.*)?\\n)+",
				"\\ *-(\\ +(name:\\ ?[\"']?[^\\n\"']+[\"']?|version:\\ ?[\"']?(?<currentValue>[^\\n\"']+)[\"']?|source:\\ ?[\"']?git[\"']?|digest:\\ ?[\"']?(?<currentDigest>[a-fA-F0-9]{40})[\"']?|url:\\ ?[\"']?(?<packageName>[^\\n\"']+)[\"']?)[\\ \\n]*\\n+){4,5}"
			],
			"versioningTemplate": "git",
			"datasourceTemplate": "git-refs"
		}
	],
	"customDatasources": {
		"arduino-lib": {
			"defaultRegistryUrlTemplate": "https://downloads.arduino.cc/libraries/library_index.json",
			"format": "json",
			"transformTemplates": [
				"{ \"releases\": $map(libraries[name=\"{{packageName}}\"], function($v) { { \"version\": $v.version, \"sourceUrl\": $v.repository } }), \"homepage\": libraries[name=\"{{packageName}}\"][-1].website, \"sourceUrl\": libraries[name=\"{{packageName}}\"][-1].repository }"
			]
		}
	},
	"regex": {
		"enabled": true
	}
}